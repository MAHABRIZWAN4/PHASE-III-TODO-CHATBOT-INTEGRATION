{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "MCP Task Management Tools",
  "description": "Model Context Protocol tools for todo task CRUD operations with user isolation",
  "version": "1.0.0",
  "tools": [
    {
      "name": "add_task",
      "description": "Create a new task for a user",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID for security isolation (must match authenticated user)"
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Task title (required)"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "description": "Optional task description"
          },
          "due_date": {
            "type": "string",
            "format": "date-time",
            "description": "Optional due date in ISO 8601 format"
          }
        },
        "required": ["user_id", "title"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Whether the operation succeeded"
          },
          "task": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "user_id": {
                "type": "string"
              },
              "title": {
                "type": "string"
              },
              "description": {
                "type": "string",
                "nullable": true
              },
              "completed": {
                "type": "boolean"
              },
              "due_date": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "created_at": {
                "type": "string",
                "format": "date-time"
              },
              "updated_at": {
                "type": "string",
                "format": "date-time"
              }
            }
          },
          "message": {
            "type": "string",
            "description": "Human-readable success message"
          },
          "error": {
            "type": "string",
            "description": "Error message if success is false"
          },
          "code": {
            "type": "string",
            "enum": ["VALIDATION_ERROR", "UNAUTHORIZED", "DATABASE_ERROR"],
            "description": "Error code if success is false"
          }
        },
        "required": ["success"]
      },
      "examples": [
        {
          "input": {
            "user_id": "user_123",
            "title": "Buy groceries",
            "description": "Milk, eggs, bread",
            "due_date": "2026-01-20T00:00:00Z"
          },
          "output": {
            "success": true,
            "task": {
              "id": "task_456",
              "user_id": "user_123",
              "title": "Buy groceries",
              "description": "Milk, eggs, bread",
              "completed": false,
              "due_date": "2026-01-20T00:00:00Z",
              "created_at": "2026-01-17T10:30:00Z",
              "updated_at": "2026-01-17T10:30:00Z"
            },
            "message": "Task created successfully"
          }
        },
        {
          "input": {
            "user_id": "user_123",
            "title": ""
          },
          "output": {
            "success": false,
            "error": "Title cannot be empty",
            "code": "VALIDATION_ERROR"
          }
        }
      ]
    },
    {
      "name": "list_tasks",
      "description": "Retrieve tasks with optional filtering",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID for security isolation"
          },
          "status": {
            "type": "string",
            "enum": ["all", "active", "completed"],
            "default": "all",
            "description": "Filter by completion status"
          },
          "due_before": {
            "type": "string",
            "format": "date-time",
            "description": "Filter tasks due before this date"
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 100,
            "description": "Maximum number of tasks to return"
          }
        },
        "required": ["user_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "string", "format": "uuid"},
                "user_id": {"type": "string"},
                "title": {"type": "string"},
                "description": {"type": "string", "nullable": true},
                "completed": {"type": "boolean"},
                "due_date": {"type": "string", "format": "date-time", "nullable": true},
                "created_at": {"type": "string", "format": "date-time"},
                "updated_at": {"type": "string", "format": "date-time"}
              }
            }
          },
          "count": {
            "type": "integer",
            "description": "Number of tasks returned"
          },
          "filtered_by": {
            "type": "object",
            "description": "Applied filters"
          },
          "error": {"type": "string"},
          "code": {"type": "string"}
        },
        "required": ["success"]
      },
      "examples": [
        {
          "input": {
            "user_id": "user_123",
            "status": "active"
          },
          "output": {
            "success": true,
            "tasks": [
              {
                "id": "task_456",
                "user_id": "user_123",
                "title": "Buy groceries",
                "description": "Milk, eggs, bread",
                "completed": false,
                "due_date": "2026-01-20T00:00:00Z",
                "created_at": "2026-01-17T10:30:00Z",
                "updated_at": "2026-01-17T10:30:00Z"
              }
            ],
            "count": 1,
            "filtered_by": {
              "status": "active"
            }
          }
        }
      ]
    },
    {
      "name": "complete_task",
      "description": "Mark a task as completed",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID for security isolation"
          },
          "task_id": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the task to complete"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "task": {
            "type": "object",
            "properties": {
              "id": {"type": "string", "format": "uuid"},
              "user_id": {"type": "string"},
              "title": {"type": "string"},
              "completed": {"type": "boolean"},
              "completed_at": {"type": "string", "format": "date-time"},
              "updated_at": {"type": "string", "format": "date-time"}
            }
          },
          "message": {"type": "string"},
          "error": {"type": "string"},
          "code": {
            "type": "string",
            "enum": ["NOT_FOUND", "UNAUTHORIZED", "DATABASE_ERROR"]
          }
        },
        "required": ["success"]
      },
      "examples": [
        {
          "input": {
            "user_id": "user_123",
            "task_id": "task_456"
          },
          "output": {
            "success": true,
            "task": {
              "id": "task_456",
              "user_id": "user_123",
              "title": "Buy groceries",
              "completed": true,
              "completed_at": "2026-01-17T11:00:00Z",
              "updated_at": "2026-01-17T11:00:00Z"
            },
            "message": "Task marked as completed"
          }
        },
        {
          "input": {
            "user_id": "user_123",
            "task_id": "task_999"
          },
          "output": {
            "success": false,
            "error": "Task not found",
            "code": "NOT_FOUND"
          }
        }
      ]
    },
    {
      "name": "delete_task",
      "description": "Permanently remove a task",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID for security isolation"
          },
          "task_id": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the task to delete"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "message": {"type": "string"},
          "deleted_task_id": {"type": "string", "format": "uuid"},
          "error": {"type": "string"},
          "code": {
            "type": "string",
            "enum": ["NOT_FOUND", "UNAUTHORIZED", "DATABASE_ERROR"]
          }
        },
        "required": ["success"]
      },
      "examples": [
        {
          "input": {
            "user_id": "user_123",
            "task_id": "task_456"
          },
          "output": {
            "success": true,
            "message": "Task deleted successfully",
            "deleted_task_id": "task_456"
          }
        }
      ]
    },
    {
      "name": "update_task",
      "description": "Update task properties",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID for security isolation"
          },
          "task_id": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the task to update"
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "New task title"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "description": "New task description"
          },
          "due_date": {
            "type": "string",
            "format": "date-time",
            "description": "New due date"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "task": {
            "type": "object",
            "properties": {
              "id": {"type": "string", "format": "uuid"},
              "user_id": {"type": "string"},
              "title": {"type": "string"},
              "description": {"type": "string", "nullable": true},
              "completed": {"type": "boolean"},
              "due_date": {"type": "string", "format": "date-time", "nullable": true},
              "updated_at": {"type": "string", "format": "date-time"}
            }
          },
          "message": {"type": "string"},
          "error": {"type": "string"},
          "code": {
            "type": "string",
            "enum": ["VALIDATION_ERROR", "NOT_FOUND", "UNAUTHORIZED", "DATABASE_ERROR"]
          }
        },
        "required": ["success"]
      },
      "examples": [
        {
          "input": {
            "user_id": "user_123",
            "task_id": "task_456",
            "title": "Buy groceries and cook dinner",
            "due_date": "2026-01-21T00:00:00Z"
          },
          "output": {
            "success": true,
            "task": {
              "id": "task_456",
              "user_id": "user_123",
              "title": "Buy groceries and cook dinner",
              "description": "Milk, eggs, bread",
              "completed": false,
              "due_date": "2026-01-21T00:00:00Z",
              "updated_at": "2026-01-17T12:00:00Z"
            },
            "message": "Task updated successfully"
          }
        }
      ]
    }
  ],
  "errorCodes": {
    "VALIDATION_ERROR": {
      "description": "Input validation failed",
      "httpEquivalent": 400
    },
    "UNAUTHORIZED": {
      "description": "User not authorized for resource",
      "httpEquivalent": 403
    },
    "NOT_FOUND": {
      "description": "Resource does not exist",
      "httpEquivalent": 404
    },
    "DATABASE_ERROR": {
      "description": "Database operation failed",
      "httpEquivalent": 500
    }
  },
  "securityPrinciples": [
    "All tools require user_id parameter for user isolation",
    "Tools validate that task belongs to user before operations",
    "No cross-user data access possible",
    "All inputs validated before database operations",
    "Errors do not expose internal system details"
  ]
}
